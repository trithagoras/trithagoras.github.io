<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Chasms 001 - Making an ASCII Roguelike in C++ | batchler.me</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Chasms 001 - Making an ASCII Roguelike in C++" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Welcome to my tutorial, thoughts, and philosophy regarding easy and correct game design. This tutorial series will see the creation of my ASCII roguelike, Chasms, which is heavily inspired by POWDER, and admittedly, is my only exposure to the roguelike genre." />
<meta property="og:description" content="Welcome to my tutorial, thoughts, and philosophy regarding easy and correct game design. This tutorial series will see the creation of my ASCII roguelike, Chasms, which is heavily inspired by POWDER, and admittedly, is my only exposure to the roguelike genre." />
<link rel="canonical" href="/jekyll/update/2021/04/20/cpp-roguelike-001.html" />
<meta property="og:url" content="/jekyll/update/2021/04/20/cpp-roguelike-001.html" />
<meta property="og:site_name" content="batchler.me" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-04-20T20:30:00+10:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Chasms 001 - Making an ASCII Roguelike in C++" />
<script type="application/ld+json">
{"description":"Welcome to my tutorial, thoughts, and philosophy regarding easy and correct game design. This tutorial series will see the creation of my ASCII roguelike, Chasms, which is heavily inspired by POWDER, and admittedly, is my only exposure to the roguelike genre.","headline":"Chasms 001 - Making an ASCII Roguelike in C++","dateModified":"2021-04-20T20:30:00+10:00","datePublished":"2021-04-20T20:30:00+10:00","url":"/jekyll/update/2021/04/20/cpp-roguelike-001.html","mainEntityOfPage":{"@type":"WebPage","@id":"/jekyll/update/2021/04/20/cpp-roguelike-001.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="batchler.me" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">batchler.me</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Chasms 001 - Making an ASCII Roguelike in C++</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-04-20T20:30:00+10:00" itemprop="datePublished">Apr 20, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Welcome to my tutorial, thoughts, and philosophy regarding easy and correct game design. This tutorial series will see the creation of my ASCII roguelike, Chasms, which is heavily inspired by <a href="http://www.zincland.com/powder/">POWDER</a>, and admittedly, is my only exposure to the roguelike genre.</p>

<p>Chasms will be written with C++, but do not be deterred. This series tries to avoid displaying and explaining each line of code, but rather delivers a higher level explanation of how a game runs through its loop and stores its data.</p>

<p>At the end of part 1, you can expect the game to look like this:</p>

<p><img src="/assets/001-gameplay.gif" alt="Gameplay" /></p>

<p><br /></p>

<h2 id="the-motivation">The Motivation</h2>

<p>As you can see in the above gameplay, Chasms is a command-line ASCII turn-based roguelike. By keeping it ASCII, we don’t have to spend any time on graphics, and the player gets the benefit of playing straight from the terminal.</p>

<p><br /></p>

<h2 id="getting-started">Getting Started</h2>

<p>Whether you are making the game in C++, C, Python, Java, or any other language, the first thing to consider is how we’re delivering our “graphics”. For this, of course, we will be utilising the <a href="https://en.wikipedia.org/wiki/Ncurses">ncurses</a> library. This will allow us to draw directly to the terminal at any position, in any colour, as well as instantly read keystrokes.</p>

<p>For C/C++, simply add the following line to your CMakeLists.txt</p>

<figure class="highlight"><pre><code class="language-cmake" data-lang="cmake"><span class="nb">set</span><span class="p">(</span>CMAKE_CXX_FLAGS -lncurses<span class="p">)</span></code></pre></figure>

<p><em>Removing the <code class="language-plaintext highlighter-rouge">XX</code> if using C</em></p>

<p>Python comes with the curses library by default, and has <em>okay</em> accompanying documentation <a href="https://docs.python.org/3/howto/curses.html">here</a>.</p>

<p>I’ve also tried to find ncurses bindings for C# in the past but had no luck. I did, however, end up writing my own bindings by taking advantage of Dll Imports. e.g.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"libncurses.5.4.dylib"</span><span class="p">,</span> <span class="n">EntryPoint</span> <span class="p">=</span> <span class="s">"mvaddstr"</span><span class="p">)]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">extern</span> <span class="kt">int</span> <span class="nf">AddString</span><span class="p">(</span><span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">string</span> <span class="n">str</span><span class="p">);</span></code></pre></figure>

<p><em>I might make a separate post about this one day :)</em></p>

<p>Now, let’s consider the main control flow for our game, which is the most important thing to get right.</p>

<p><br /></p>

<h2 id="the-main-loop">The Main Loop</h2>

<p>All games are represented with a main loop. Game engines such as Unity hide this from you, but Unity’s main loop is abstractly no different to ours.</p>

<p>Here is the order that the game will follow:</p>
<ol>
  <li><code class="language-plaintext highlighter-rouge">update()</code> - all logic and input processing is done here</li>
  <li><code class="language-plaintext highlighter-rouge">draw()</code> - the screen is refreshed and redrawn to reflect the previous update</li>
  <li><code class="language-plaintext highlighter-rouge">get_input()</code> - the input is polled here, and stored to be processed in the next <code class="language-plaintext highlighter-rouge">update()</code> call.</li>
</ol>

  </div><a class="u-url" href="/jekyll/update/2021/04/20/cpp-roguelike-001.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">batchler.me</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">batchler.me</li><li><a class="u-email" href="mailto:corey@batchler.me">corey@batchler.me</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/trithagoras"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">trithagoras</span></a></li><li><a href="https://www.twitter.com/cb3bolt"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">cb3bolt</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
